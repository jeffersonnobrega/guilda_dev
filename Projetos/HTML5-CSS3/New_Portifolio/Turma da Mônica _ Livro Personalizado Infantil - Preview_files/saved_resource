"use strict";window.etag=window.etag||{},function(e){const t={update:()=>{Object.entries(t.modules).forEach((e=>{const[t,i]=e;i.update?.()}))}};t.config={uuid:"aab476db-6aac-4bb7-879b-734b222c574b",modules:{core:e=>{const t=e,i="core",r=!1,a=!1,n={uuid:()=>t.config.uuid,sessionName:()=>"_etg_"+t.config.uuid.split("-")[0],debug:(e,...i)=>{t.config.debugMode&&console.log("[ETAG] "+e,...i)},currentURL:(e=!0)=>e?window.location.href.split("?")[0]??window.location.href:window.location.href,isMobile:()=>{return e=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substring(0,4));var e},getMobileOS:()=>{const e=/iPhone|iPad|iPod/i.test(navigator.userAgent),t=/Android/i.test(navigator.userAgent);return e?"IOS":t?"Android":"Other Mobile OS"},getDevice:()=>n.isMobile()?n.getMobileOS():"Desktop",uuidv4:()=>self.crypto.randomUUID(),delay:e=>new Promise((t=>setTimeout(t,e))),isEmailValid:e=>/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e),normalizeEmail:e=>e.trim().toLowerCase(),isEmpty:e=>null==e||!(Object.keys(e)||e.trim()).length,isLengthValid:e=>null==e||e.trim().length<3e3,session:e=>({set:function(t,i){const r=this.get();r[t]=i,localStorage.setItem(e,JSON.stringify(r))},get:function(t){let i={};return localStorage.getItem(e)?i=JSON.parse(localStorage.getItem(e)):localStorage.setItem(e,JSON.stringify(i)),t?i[t]:i},delete:function(t){const i=this.get();delete i[t],localStorage.setItem(e,JSON.stringify(i))}}),filterValidProducts:(e,t=10)=>{const i=["image","url","description","price","name"];return e.filter((e=>i.every((t=>Object.keys(e).some((e=>e.toLowerCase()===t.toLowerCase()))&&void 0!==e[t]&&null!==e[t]&&""!==String(e[t]).trim())))).slice(0,t)},cookies:{set:(e,i,r)=>{const a=new Date;a.setTime(a.getTime()+24*r*60*60*1e3);const n="; expires="+a.toUTCString();document.cookie=e+"="+(btoa(JSON.stringify(i))||"")+(r?n:"")+"; path=/; SameSite=None; Secure; domain="+t.utils.getRootDomain(window.location.href)},get:e=>{const i=new RegExp(e+"=([^;]+)").exec(document.cookie);if(i)return JSON.parse(atob(i[1]));const r={uuid:t.config.uuid,sessionId:t.utils.uuidv4()};return t.utils.cookies.set(e,r,365),r},delete:e=>{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/; Max-Age=-9999; domain="+t.utils.getRootDomain(window.location.href)}},getAdvancedElements:e=>{let i=null,r=e;if(0==e.indexOf("sequence:")){const t=e.substring(9).split(">>");if(!t.length)return[null,null];r=t.splice(0,1)[0],i=1==t.length?t[0]:`sequence:${t.join(">>")}`}return[t.utils.getElements(r),i]},getElements:e=>{if(!e||""==e.trim())return null;if(0==e.indexOf("evaluate:")){const t=e.substring(9),i=document.evaluate(t,document,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);let r;const a=[];for(;r=i.iterateNext();)a.push(r);return a}if(0==e.indexOf("shadow:")){const t=e.substring(7).split("::shadow");if(!t.length)return null;let i=Array.from(document.querySelectorAll(t[0]));for(let e=1;t.length>e;e++){const r=t[e];let a=[];for(let e=0;i.length>e;e++){const t=i[e].shadowRoot;if(t){const e=t.querySelectorAll(r);a=a.concat([...e])}}i=a}return i}if(0==e.indexOf("sequence:")){const t=e.substring(9).split(">>");if(!t.length)return null;const i=t[0];return Array.from(document.querySelectorAll(i))}return Array.from(document.querySelectorAll(e))},getURLParameter:e=>new URLSearchParams(window.location.search).get(e),isCampaignOnDate:(e,t)=>{const i=Date.now(),r=e?new Date(e).getTime():Date.now(),a=t?new Date(t).getTime():Date.now();return i>=r&&a>=i},isRequiredElementOnPage:e=>document.querySelector(e),applyCampaign:(e,i)=>{const r=t.utils.isCampaignOnDate(e.startDate,e.endDate),a=(!e.includeIfUrlRegex||t.utils.matchPageURL(e.includeIfUrlRegex))&&(e.active&&r||e.preview&&t.utils.getURLParameter("preview")==i&&t.utils.getURLParameter("id")==e.id),n=!e.includeIfHtmlSelector||t.utils.isRequiredElementOnPage(e.includeIfHtmlSelector);return!(!a||!n)},addUtmToLinks:(e,i)=>{e.querySelectorAll("a").forEach((e=>{e.href=t.utils.formatLink(e.href,i)}))},addPixelToLinks:(e,t)=>{e.querySelectorAll("a").forEach((e=>{e.href=t+e.href}))},addTrackToLinks:(e,i={})=>{e.querySelectorAll("a").forEach((e=>{e.href=t.api.track.url(e.href,i)}))},matchPageURL:e=>{const t=new RegExp(e),i=window.location.href;return t.test(i)},formatLink:(e,t="")=>e+(t?(-1==e.indexOf("?")?"?":"&")+t:""),getRootDomain:e=>{const t=new URL(e).hostname.split("."),i=t.length-1,r=t[i-1],a=t[i];return(i>=2&&5>=(r+a).length?t[i-2]+".":"")+(r?r+".":"")+a},fetchURL:async(e,t,i)=>{try{const i=await fetch(e);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);t(await i.json())}catch(e){i(e)}}};return(async()=>{if(t.config.debugMode=r||!1,t.config.debugMode&&console.log("%c   _____                      __ ______            \n  / ___/____ ___  ____  _____/ //_  __/___  ____ \n  \\__ \\/ __ `__ \\/ __ `/ ___/ __// / / __ `/ __ `/\n ___/ / / / / / / /_/ / /  / /_ / / / /_/ / /_/ / \n/____/_/ /_/ /_/\\__,_/_/   \\__//_/  \\__,_/\\__, /  \n                                         /____/   \n                                         By EtagDigital \n\n","color:#fecc30"),t.utils=n,t.api=(()=>{const e=t.utils.sessionName(),i={Accept:"application/json","Content-Type":"application/json;charset=UTF-8"};return{get:(r,a,n)=>{const l=t.utils.cookies.get(e),o={location:t.utils.currentURL(),uuid:l.uuid,session:l.sessionId,...n},s=new URLSearchParams(o).toString();return fetch(r+a+(s?"?":"")+s,{method:"GET",headers:i}).then((e=>e))},post:(r,a,n)=>{const l=t.utils.cookies.get(e);n.location=t.utils.currentURL(),n.uuid=l.uuid,n.session=l.sessionId,n.device=t.utils.getDevice(),n.isMobile=t.utils.isMobile();const o={method:"POST",headers:i,body:JSON.stringify(n)};return fetch(r+a,o).then((e=>e))},track:{url:(i,r={})=>{const a=t.utils.cookies.get(e);return r.location=t.utils.currentURL(),r.uuid=a.uuid,r.session=a.sessionId,r.url=i,t.config.urls.trackingService+"/link?rd="+encodeURIComponent(btoa(JSON.stringify(r)))},interaction:(e,i,r,a={})=>{a.target=e,a.trigger=i,a.action=r,t.api.post(t.api.urlTrackingService,"/interaction",a)}},push:{publickKey:async()=>{const e=await t.api.get(t.api.urlPushService,"/subscription/publickey");return(await e.json()).publicKey},subscribe:async i=>{const r=t.utils.cookies.get(e);return await t.api.post(t.api.urlPushService,`/subscription/subscribe/${r.uuid}`,i)}},urlApiCapture:t.config.urls.apiCapture,urlCaptureService:t.config.urls.captureService,urlTrackingService:t.config.urls.trackingService,urlReportService:t.config.urls.reportService,urlPushService:t.config.urls.pushService,sessionName:e}})(),n.debug("%c###### Initializing module "+i,"color:#fecc30"),a){let e=document.location.href;const i=document.querySelector("body");new MutationObserver((()=>{e!==document.location.href&&(e=document.location.href,window.etag&&window.etag[t.utils.uuid()].update())})).observe(i,{childList:!0,subtree:!0})}})(),{name:i}},"tag-capture":e=>{const t=e,i="tag-capture";let r=!1;const a=[{id:333,name:"ConversÃ£o",delay:0,includeIfUrlRegex:".+.com.br\\/checkout\\/sucesso",type:"CONVERSION",triggerEvent:"LOAD",selector:null,systemCapture:!1,passiveCapture:!0,clientId:115,createdAt:"2024-10-28T14:46:04.414Z",updatedAt:"2024-10-28T14:46:04.414Z",fields:[{id:821,name:"Conversion",group:"",selector:"",captureId:333,htmlAttribute:"URL",triggerEvent:"LOAD",validatorNotNull:null,validatorRegex:null,validatorGreaterThan:null,validatorLesserThan:null,createdAt:"2024-10-28T14:46:04.414Z",updatedAt:"2024-10-28T14:46:04.414Z"}],channels:["tagmail"]},{id:334,name:"Carrinho",delay:2e3,includeIfUrlRegex:".+.com.br\\/carrinho",type:"CART",triggerEvent:"LOAD",selector:null,systemCapture:!1,passiveCapture:!0,clientId:115,createdAt:"2024-10-28T14:49:48.600Z",updatedAt:"2024-10-28T14:49:48.600Z",fields:[{id:822,name:"Image",group:"cart",selector:".order-item-image-wrapper img",captureId:334,htmlAttribute:"SRC",triggerEvent:"LOAD",validatorNotNull:null,validatorRegex:null,validatorGreaterThan:null,validatorLesserThan:null,createdAt:"2024-10-28T14:49:48.600Z",updatedAt:"2024-10-28T14:49:48.600Z"},{id:824,name:"Name",group:"cart",selector:".order-item-name.order-item-name-mobile",captureId:334,htmlAttribute:"INNER_TEXT",triggerEvent:"LOAD",validatorNotNull:null,validatorRegex:null,validatorGreaterThan:null,validatorLesserThan:null,createdAt:"2024-10-28T15:08:13.872Z",updatedAt:"2024-10-28T15:08:13.872Z"},{id:825,name:"TotalBasket",group:"",selector:".order-totals-total",captureId:334,htmlAttribute:"INNER_TEXT",triggerEvent:"LOAD_CHANGE",validatorNotNull:null,validatorRegex:null,validatorGreaterThan:null,validatorLesserThan:null,createdAt:"2024-10-28T15:08:15.971Z",updatedAt:"2024-10-28T15:08:15.971Z"},{id:826,name:"UnitPrice",group:"cart",selector:".order-item-discounted-price-mobile",captureId:334,htmlAttribute:"INNER_TEXT",triggerEvent:"LOAD",validatorNotNull:null,validatorRegex:null,validatorGreaterThan:null,validatorLesserThan:null,createdAt:"2024-10-28T15:08:17.080Z",updatedAt:"2024-10-28T15:08:17.080Z"},{id:829,name:"CustomName",group:"cart",selector:".order-item-name.order-item-name-mobile .custom-name",captureId:334,htmlAttribute:"INNER_TEXT",triggerEvent:"LOAD",validatorNotNull:null,validatorRegex:null,validatorGreaterThan:null,validatorLesserThan:null,createdAt:"2024-10-31T12:37:55.481Z",updatedAt:"2024-10-31T13:11:31.410Z"}],channels:["tagmail"]},{id:335,name:"Email Cadastro Preview",delay:1e3,includeIfUrlRegex:".+.com.br\\/.+\\/.+\\/preview",type:"LEAD",triggerEvent:"LOAD",selector:null,systemCapture:!1,passiveCapture:!0,clientId:115,createdAt:"2024-10-28T15:02:16.486Z",updatedAt:"2024-10-28T15:09:34.197Z",fields:[{id:823,name:"lead",group:"",selector:".email-input input",captureId:335,htmlAttribute:"VALUE",triggerEvent:"CHANGE",validatorNotNull:null,validatorRegex:null,validatorGreaterThan:null,validatorLesserThan:null,createdAt:"2024-10-28T15:02:16.486Z",updatedAt:"2024-10-28T15:02:16.486Z"}],channels:["tagmail"]},{id:336,name:"Email Cadastro Checkout",delay:1e3,includeIfUrlRegex:".+.com.br\\/checkout\\/v2",type:"LEAD",triggerEvent:"LOAD",selector:null,systemCapture:!1,passiveCapture:!0,clientId:115,createdAt:"2024-10-28T15:11:04.435Z",updatedAt:"2024-10-28T15:11:04.435Z",fields:[{id:827,name:"lead",group:"",selector:".email-input-group input",captureId:336,htmlAttribute:"VALUE",triggerEvent:"CHANGE",validatorNotNull:null,validatorRegex:null,validatorGreaterThan:null,validatorLesserThan:null,createdAt:"2024-10-28T15:11:04.435Z",updatedAt:"2024-10-28T15:11:04.435Z"}],channels:["tagmail"]},{id:337,name:"Email Login",delay:1e3,includeIfUrlRegex:".+.com.br\\/login\\?.+",type:"LEAD",triggerEvent:"LOAD",selector:null,systemCapture:!1,passiveCapture:!0,clientId:115,createdAt:"2024-10-28T15:14:39.388Z",updatedAt:"2024-10-28T15:14:39.388Z",fields:[{id:828,name:"lead",group:"",selector:"#Email",captureId:337,htmlAttribute:"VALUE",triggerEvent:"CHANGE",validatorNotNull:null,validatorRegex:null,validatorGreaterThan:null,validatorLesserThan:null,createdAt:"2024-10-28T15:14:39.388Z",updatedAt:"2024-10-28T15:14:39.388Z"}],channels:["tagmail"]}],n=(e,...r)=>{t.utils.debug(`%c[${i}] `+e,"color:#77dd77; padding-top:10px",...r)},l={LEAD:"lead",CART:"cart",CONVERSION:"conversion",PRODUCT:"product",REGISTER:"register",GENERIC:"generic"},o={LOAD:"load",CHANGE:"change",LOAD_CHANGE:"load-change",CLICK:"click",NONE:"none"},s={VALUE:{value:"value",type:"prop"},SRC:{value:"src",type:"attr"},HREF:{value:"href",type:"attr"},BACKGROUND_IMAGE:{value:"background-image",type:"style"},INNER_HTML:{value:"innerHTML",type:"prop"},INNER_TEXT:{value:"innerText",type:"prop"},META_CONTENT:{value:"content",type:"meta"},URL:{value:"url",type:"script"},NONE:{value:"none",type:"none"}},u=(()=>{const e=[],i=e=>{if(!(Object.keys(l).indexOf(e.type)>-1))return null;const i=l[e.type],a=e.id;let s,u=!0,c=null,d={};const g={id:a,type:i,fields:d},p=()=>{const r={captureId:e.id,info:{}};let a=!1;for(const[e,n]of Object.entries(d))if(Array.isArray(n)){const o=n[0].elements?n[0].elements.length:1,s=r.info[e]=[];for(let e=0;o>e;e++){const r={};for(const o of n){const n=o.value(e),s=i==l.LEAD?t.utils.isEmailValid(n)?t.utils.normalizeEmail(n):"":n,u=r[o.name]=s.trim();a=a||!t.utils.isEmpty(u)&&t.utils.isLengthValid(u)}s.push(r)}}else{const o=n.value(),s=r.info[e]=i==l.LEAD?t.utils.isEmailValid(o)?t.utils.normalizeEmail(o):"":o;a=a||!t.utils.isEmpty(s)&&t.utils.isLengthValid(s)}return[a,r]},m=()=>{const[e,t]=p();e&&JSON.stringify(c)!=JSON.stringify(t.info)&&(h(),b())},v=()=>{const[e,t]=p();return c=t.info,n("###### Captured",e,t),e?(f(t),t):null},h=()=>{for(const[e,t]of Object.entries(d))if(Array.isArray(t)){for(let e=(t[0].elements?t[0].elements.length:1)-1;e>=0;e--)for(const e of t)e.deactivate()}else t.deactivate();clearInterval(s)},b=()=>{d={};for(const t of e.fields){const e=Object.keys(o).indexOf(t.triggerEvent)>-1;u=u&&e;const i=r(t,v);if(i.isElement&&0==i.elements.length)n(`Field not found: ${i.name}`);else if(t.group){(d[t.group]=d[t.group]||[]).push(i)}else d[t.name]=i}u&&v(),"cart"==i&&(s=setInterval(m,2e3)),n("###### Capturing on"+(u?"Load":"Change"),e)};return b(),{...g,capture:v,deactivate:h}},r=(e,i)=>{const r=s[e.htmlAttribute],a=r.value,n=r.type,l="script"!=n,u=l?t.utils.getElements(e.selector):null;let c=o[e.triggerEvent];if(c=c==o.LOAD_CHANGE?o.CHANGE:c,l&&"load"!==c)for(const e of u)e.addEventListener(c,i);return{name:e.name,type:n,isElement:l,elements:u,value:(e=0)=>{if(a&&l&&u.length>0){const i=u[e];if(!i||"none"==a)return null;if("attr"==n)return"src"===a||"href"===a?i[a]:i.getAttribute(a);if("prop"==n){if("innerHTML"===a||"innerText"===a)return i[a]||null;if("value"===a)return i[a]||null}else{if("url"==a)return t.utils.currentURL();if("background-image"==a){const e=window.getComputedStyle(i,null).backgroundImage.match(/"+(.+)"+/);return e?e[1]:null}if("content"==a)return i.getAttribute(a)||null}}else if("url"==a)return t.utils.currentURL();return null},deactivate:()=>{if(l)for(const e of u)e.removeEventListener(c,i)}}};return{add:t=>{const r=i(t);r&&e.push(r)},capture:()=>{for(const t of e)t.capture()},deactivate:()=>{for(const t of e)t.deactivate()}}})(),c=async(e=!1)=>{if(n((e?"Update":"Initialize")+" module"),r)return void n("Abort: already initializing");let i;r=!0;let l=0;for(const r of a){const a=r.name;let s=o[r.triggerEvent];if(n(`${e?"Update":"Initialize"} item ${a} on ${s}`,r),r.delay>=l&&(clearTimeout(i),l=r.delay,i=setTimeout(d,l)),s=s==o.LOAD_CHANGE?o.CHANGE:s,-1==[o.LOAD,o.NONE].indexOf(s)){const i=r.delay||0;await t.utils.delay(i);if(!(!r.includeIfUrlRegex||t.utils.matchPageURL(r.includeIfUrlRegex)))continue;g(s,r,r.selector,e)}else s==o.LOAD&&m(r,e)}},d=()=>{r=!1},g=(e,i,r,a)=>{if(!r)return void n("No selector defined",i);const[l,o]=t.utils.getAdvancedElements(r),s=l[0];n(`setInitDispatchElement: element:${s} nextElement:${o} event: ${e}`,i),s&&(s.dataset.next=JSON.stringify(o),s.dataset.event=e,s.dataset.etagCaptureIds=((e,t)=>{const i=t?JSON.parse(t):[];return i.push(e.id),JSON.stringify(i)})(i,s.dataset.etagCaptureIds),s.dataset.reset=JSON.stringify(a),s.addEventListener(e,p))},p=async e=>{const i=e.currentTarget,r=i.dataset.etagCaptureIds?JSON.parse(i.dataset.etagCaptureIds):[],l=JSON.parse(i.dataset.reset),o=i.dataset.event,s=JSON.parse(i.dataset.next);for(const e of r){const i=a.find((t=>t.id===e));n(`initializer: nextElement: ${s} event: ${o}`,i),s?(await t.utils.delay(i.delay),g(o,i,s,l)):m(i,l)}},m=async(e,i=!1)=>{const r=e.name,a=e.delay||0;n(`${i?"Update":"Initialize"} item ${r} in ${a}ms`,e),await t.utils.delay(a);const l=!e.includeIfUrlRegex||t.utils.matchPageURL(e.includeIfUrlRegex);n(`#### Capture ${r}`,l),l&&u.add(e)},f=async e=>{n("###### Send capture",e);const i=a.find((t=>t.id===e.captureId));if(n("###### captureData",i),!i)return null;const r=i.type,o=Object.keys(l).indexOf(r)>-1;if(e.channels=i.channels,n("###### captureType",e,o),!o)return null;const s=await t.api.post(t.api.urlCaptureService,`/capture/${l[r]}`,e);return r==l.CONVERSION&&(t.utils.cookies.delete(t.utils.sessionName()),t.utils.session(t.utils.sessionName()).delete()),{capturedData:e,response:s}};return c(),{name:i,update:()=>{u.deactivate();for(const e of a){let i=o[e.triggerEvent];if(i=i==o.LOAD_CHANGE?o.CHANGE:i,-1==[o.LOAD,o.NONE].indexOf(i)&&e.selector){const r=t.utils.getElements(e.selector)[0];r&&r.removeEventListener(i,p)}}c(!0)},captureData:f,retrieveData:async e=>{const i=a.find((t=>t.id===e));if(n("###### captureData",i),!i)return null;const r=i.type,o=Object.keys(l).indexOf(r)>-1;if(n("###### captureType",r,o),!o)return null;const s=await t.api.get(t.api.urlCaptureService,`/search_capture/${l[r]}`,{captureId:e}).then((e=>e.json())).then((e=>e));return s}}}},debugMode:!0,allowedSites:[".*"],urls:{modules:"/dist/modules/",...JSON.parse('{"apicapture":"https://api.etagdigital.com","captureService":"https://capture.etagdigital.com","trackingService":"https://tracking.etagdigital.com","reportService":"https://report.etagdigital.com","pushService":"https://tagpush.etagdigital.com","cdn":"https://cdn.jazz.etagdigital.com"}')}};let i=e[t.config.uuid]||{};t.init=()=>{t.modules={},Object.entries(t.config.modules).forEach((async e=>{const[i,r]=e;t.modules[i]=await r(t)})),window.etag[t.utils.uuid()]=i={get debug(){return t.config.debugMode},set debug(e){t.config.debugMode=e,e?(i.utils=t.utils,i.modules=t.modules):(delete i.utils,delete i.modules)},update:t.update},i.debug=t.config.debugMode},i.update&&!i.debug||t.init()}.call(this,window.etag);